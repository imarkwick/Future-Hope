<!doctype html>
<html lang="en">
  <head>
    <title>Future Hope</title>
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300|Love+Ya+Like+A+Sister' rel='stylesheet' type='text/css'>
    <script src="https://code.jquery.com/jquery-latest.min.js"
        type="text/javascript"></script>
  </head>
  <body>
  	<%= yield %>
	<script src="js/foundation.js"></script>
  <script src="js/script.js"></script>
  <script>
    var append_li = function(string) {
      $('#messages').append($('<li>').text(string));
    }
    var ws_uri = location.href.replace(/^http/, 'ws');
    console.log(ws_uri);
    // var ws_uri = 'http://localhost:9292/display';
    var ws = new WebSocket(ws_uri);

    ws.open = function() {
      console.log('hi from the client');
    }

    ws.onmessage = function(msg) {
      // alert("client onmessage ------ ");
      alert(msg.data);
    }

    ws.onclose = function() {
      console.log('bye from the client');
    }

    var input = $('#submit')
    input.click(function() {
      var dropdown = $('#item');
      var msg = dropdown.val();
      ws.send(msg);
      append_li(msg);
      input.val("");
      alert(msg);
    });
  </script>
  </body>
</html>